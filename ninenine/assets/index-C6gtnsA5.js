(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const g=10,h=7;let e={score:0,lives:g,timeLeft:h,timerInterval:null,currentQuestion:{ans:0},isPlaying:!1,isMuted:!1};const a=new(window.AudioContext||window.webkitAudioContext),c=(t,n,s,u=.2)=>{if(e.isMuted)return;const o=a.createOscillator(),r=a.createGain();o.type=n,o.frequency.setValueAtTime(t,a.currentTime),r.gain.setValueAtTime(u,a.currentTime),r.gain.exponentialRampToValueAtTime(.001,a.currentTime+s),o.connect(r),r.connect(a.destination),o.start(),o.stop(a.currentTime+s)},m={correct:()=>{c(523.25,"sine",.2),setTimeout(()=>c(659.25,"sine",.3),50)},wrong:()=>{c(220,"sawtooth",.1),c(110,"sawtooth",.4)},start:()=>{c(440,"sine",.1),setTimeout(()=>c(554.37,"sine",.1),100),setTimeout(()=>c(659.25,"sine",.3),200)},gameOver:()=>{c(392,"square",.2,.15),setTimeout(()=>c(349.23,"square",.2,.15),200),setTimeout(()=>c(329.63,"square",.4,.15),400)}},y={start:document.getElementById("start-screen"),game:document.getElementById("game-screen"),end:document.getElementById("end-screen")},i={timer:document.getElementById("timer"),score:document.getElementById("score"),num1:document.getElementById("num1"),num2:document.getElementById("num2"),optionsContainer:document.getElementById("options-container"),heartsContainer:document.getElementById("hearts-container"),finalScore:document.getElementById("final-score-display"),startBtn:document.getElementById("start-btn"),restartBtn:document.getElementById("restart-btn"),muteBtn:document.getElementById("mute-btn"),muteIcon:document.getElementById("mute-icon")};function M(){i.startBtn.addEventListener("click",I),i.restartBtn.addEventListener("click",I),i.muteBtn.addEventListener("click",L)}function L(){e.isMuted=!e.isMuted,i.muteIcon.textContent=e.isMuted?"‚ùå":"üîä",a.state==="suspended"&&a.resume()}function I(){a.state==="suspended"&&a.resume(),e.score=0,e.lives=g,e.timeLeft=h,e.isPlaying=!0,l(),E("game"),p(),m.start(),C()}function C(){e.timerInterval&&clearInterval(e.timerInterval),e.timerInterval=setInterval(B,1e3)}function B(){e.timeLeft--,l(),e.timeLeft<=0&&v()}function v(t=null){e.lives--,l(),m.wrong(),t?f(t,"wrong"):f(i.heartsContainer,"shake"),e.lives<=0?T():p()}function T(){e.isPlaying=!1,clearInterval(e.timerInterval),m.gameOver(),i.finalScore.textContent=e.score,E("end")}function p(){e.timeLeft=h,l();const t=Math.floor(Math.random()*8)+2,n=Math.floor(Math.random()*8)+2,s=t*n;e.currentQuestion={a:t,b:n,ans:s},i.num1.textContent=t,i.num2.textContent=n;const u=new Set;for(u.add(s);u.size<4;){let r;const d=Math.random();d<.3?r=s+(Math.floor(Math.random()*5)-2):d<.6?r=(t+(Math.floor(Math.random()*3)-1))*n:r=(Math.floor(Math.random()*9)+1)*(Math.floor(Math.random()*9)+1),r>0&&r!==s&&u.add(r)}const o=Array.from(u).sort(()=>Math.random()-.5);w(o)}function w(t){i.optionsContainer.innerHTML="",t.forEach(n=>{const s=document.createElement("button");s.className="option-btn",s.textContent=n,s.onclick=()=>O(n,s),i.optionsContainer.appendChild(s)})}function O(t,n){e.isPlaying&&(a.state==="suspended"&&a.resume(),t===e.currentQuestion.ans?(e.score+=10,m.correct(),f(n,"pulse"),setTimeout(p,300),l()):v(n))}function f(t,n){t.classList.remove("shake","pulse"),t.offsetWidth,t.classList.add(n)}function l(){i.timer.textContent=e.timeLeft,i.score.textContent=e.score,x()}function x(){i.heartsContainer.innerHTML="";for(let t=0;t<g;t++){const n=document.createElement("span");n.textContent=t<e.lives?"‚ù§Ô∏è":"üñ§",n.style.opacity=t<e.lives?"1":"0.4",n.style.transition="all 0.3s ease",i.heartsContainer.appendChild(n)}}function E(t){Object.values(y).forEach(n=>n.classList.remove("active")),y[t].classList.add("active")}M();
